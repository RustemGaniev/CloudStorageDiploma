2022-04-17 09:05:52,611 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-04-17 09:05:52,767 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 117 ms. Found 1 JPA repository interfaces.
2022-04-17 09:05:53,503 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 7878 (http)
2022-04-17 09:05:53,519 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2022-04-17 09:05:53,519 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.58]
2022-04-17 09:05:53,597 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2022-04-17 09:05:53,597 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1824 ms
2022-04-17 09:05:53,612 ERROR org.springframework.boot.web.embedded.tomcat.TomcatStarter [main] Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'JWTFilter' defined in file [C:\Users\vlads\IdeaProjects\CloudStorageDiploma\target\classes\ru\netology\cloudstorage\security\JWTFilter.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'JWTUtil' defined in file [C:\Users\vlads\IdeaProjects\CloudStorageDiploma\target\classes\ru\netology\cloudstorage\security\JWTUtil.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.core.userdetails.UserDetailsService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-04-17 09:05:53,628 INFO org.apache.catalina.core.StandardService [main] Stopping service [Tomcat]
2022-04-17 09:05:53,644 WARN org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
2022-04-17 09:05:53,644 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-04-17 09:05:53,669 ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in ru.netology.cloudstorage.security.JWTUtil required a bean of type 'org.springframework.security.core.userdetails.UserDetailsService' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.core.userdetails.UserDetailsService' in your configuration.

2022-04-17 09:09:46,951 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-04-17 09:09:47,039 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 58 ms. Found 1 JPA repository interfaces.
2022-04-17 09:09:48,203 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 7878 (http)
2022-04-17 09:09:48,214 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2022-04-17 09:09:48,215 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.58]
2022-04-17 09:09:48,329 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2022-04-17 09:09:48,330 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2331 ms
2022-04-17 09:09:48,679 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-04-17 09:09:48,893 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-04-17 09:09:49,198 INFO liquibase.database [main] Set default schema name to public
2022-04-17 09:09:49,382 INFO liquibase.lockservice [main] Successfully acquired change log lock
2022-04-17 09:09:50,686 INFO liquibase.changelog [main] Reading from public.databasechangelog
2022-04-17 09:09:50,860 INFO liquibase.lockservice [main] Successfully released change log lock
2022-04-17 09:09:51,067 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-04-17 09:09:51,185 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.5.Final
2022-04-17 09:09:51,458 INFO org.hibernate.annotations.common.Version [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-04-17 09:09:51,661 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-04-17 09:09:52,511 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-04-17 09:09:52,543 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-04-17 09:09:53,279 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-04-17 09:09:53,512 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will not secure any request
2022-04-17 09:09:53,838 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 7878 (http) with context path ''
2022-04-17 09:09:58,948 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-7878-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-04-17 09:09:58,949 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-7878-exec-1] Initializing Servlet 'dispatcherServlet'
2022-04-17 09:09:58,950 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-7878-exec-1] Completed initialization in 0 ms
2022-04-17 09:09:59,068 ERROR ru.netology.cloudstorage.security.JWTFilter [http-nio-7878-exec-1] JWT expired at 2022-04-15T19:24:34Z. Current time: 2022-04-17T09:09:59Z, a difference of 135925065 milliseconds.  Allowed clock skew: 0 milliseconds.
2022-04-17 09:10:04,372 ERROR ru.netology.cloudstorage.security.MyUserDetailsService [http-nio-7878-exec-3] User with username: Optional.empty not found
2022-04-17 09:10:42,897 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-04-17 09:10:42,897 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-04-17 09:10:42,915 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-04-17 09:10:50,848 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-04-17 09:10:50,934 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 67 ms. Found 1 JPA repository interfaces.
2022-04-17 09:10:51,588 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 7878 (http)
2022-04-17 09:10:51,604 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2022-04-17 09:10:51,604 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.58]
2022-04-17 09:10:51,864 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2022-04-17 09:10:51,864 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2354 ms
2022-04-17 09:10:52,176 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-04-17 09:10:52,329 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-04-17 09:10:52,485 INFO liquibase.database [main] Set default schema name to public
2022-04-17 09:10:52,621 INFO liquibase.lockservice [main] Successfully acquired change log lock
2022-04-17 09:10:53,273 INFO liquibase.changelog [main] Reading from public.databasechangelog
2022-04-17 09:10:53,348 INFO liquibase.lockservice [main] Successfully released change log lock
2022-04-17 09:10:53,424 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-04-17 09:10:53,474 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.5.Final
2022-04-17 09:10:53,641 INFO org.hibernate.annotations.common.Version [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-04-17 09:10:53,741 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-04-17 09:10:54,191 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-04-17 09:10:54,191 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-04-17 09:10:54,491 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-04-17 09:10:54,674 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will not secure any request
2022-04-17 09:10:54,974 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 7878 (http) with context path ''
2022-04-17 09:10:58,545 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [http-nio-7878-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-04-17 09:10:58,546 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-7878-exec-2] Initializing Servlet 'dispatcherServlet'
2022-04-17 09:10:58,547 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-7878-exec-2] Completed initialization in 1 ms
2022-04-17 09:12:28,477 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-04-17 09:12:28,477 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-04-17 09:12:28,490 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
